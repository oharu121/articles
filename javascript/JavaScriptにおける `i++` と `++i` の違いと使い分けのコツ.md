# JavaScriptにおける `i++` と `++i` の違いと使い分けのコツ

# はじめに

JavaScriptでループ処理を書くとき、多くの人が何気なく i++ を使っているのではないでしょうか。しかし、似たような演算子に ++i があることをご存知ですか？

ほとんどの場合、この2つの違いは問題になりません。しかし、特定の状況では挙動が異なり、バグの原因になることもあります。

**🧠 結論から言うと…**

| 記法   | 意味                       | 戻り値   |
|--------|----------------------------|----------|
| `i++`  | **後置インクリメント**：まず使ってから増やす | 増やす**前**の値 |
| `++i`  | **前置インクリメント**：増やしてから使う     | 増やした**後**の値 |

つまり、**「式の中で値を使うかどうか」で使い分ける**のがコツです。

# `i++` と `++i` の比較

**単独で使う場合**

```js
let i = 1;
i++;
console.log(i); // 2

let j = 1;
++j;
console.log(j); // 2
```

> 📌 `i++` も `++i` も、**変数を1つ増やす**という目的では違いなし！

**🧩 式の中で使うときの違い**

```js
let i = 1;
let a = i++; // a = 1, i = 2
```

>`i++` は「a に i を代入した後に i を増やす」

```js
let j = 1;
let b = ++j; // b = 2, j = 2
```

>`++j` は「j を先に増やしてから b に代入」

**🛠 for文ではどっちを使う？**

```js
for (let i = 0; i < 10; i++) {
  console.log(i);
}
```

または

```js
for (let i = 0; i < 10; ++i) {
  console.log(i);
}
```

> ✅ **どちらでも同じ動作**をする（`i++`の戻り値は使っていないため）。


# 値を使いながらインクリメントする場合は要注意

while ループの条件式の中や、配列のインデックス指定などでインクリメントを同時に行う場合は、意図した通りの演算子を選ぶ必要があります。

```js
let i = 0;
const arr = ['A', 'B', 'C'];

// i++ を使うと、arr[0], arr[1], arr[2] が評価される
while (i < 3) {
  console.log(arr[i++]); 
}
// 出力: A, B, C

let j = 0;
// ++j を使うと、arr[1], arr[2], arr[3] が評価され、意図しない結果やエラーになる
while (j < 3) {
  console.log(arr[++j]); // jが先にインクリメントされるため、arr[0]がスキップされる
}
// 出力: B, C, undefined
```

このようなコードはトリッキーでバグを生みやすいため、インクリメントは独立した行に書くのが安全です。

```js
// 安全な書き方
let k = 0;
while (k < 3) {
  console.log(arr[k]);
  k++; // インクリメントを分離する
}
```

# パフォーマンスの違いは？

- C++のような言語では、かつて ++i の方がパフォーマンス上有利と言われた時代があった
- **現代のJavaScriptエンジン（V8など）では最適化されている**ため、速度差は**無視してOK**
- 可読性重視で `i++` が一般的。

**🎯 まとめ：使い分けのコツ**

| 使い方           | おすすめ     | 理由 |
|------------------|--------------|------|
| 変数だけ増やしたい | `i++` or `++i` | どちらでもOK（好みで） |
| 式の中で使う       | **戻り値が必要なら注意！** | `i++`は「前の値」、`++i`は「後の値」 |
| `for`文など       | `i++`が主流   | 可読性が高い           |

# 最後に

- 基本は `i++` を使っておけば困ることは少ないです。
- 戻り値を**式に使う場合だけ** `++i` or `i++` の違いを意識しましょう。
- 複雑な式の中での多重インクリメントは避け、**1つずつ明確に書くのがバグ防止の鍵**です。
